trigger:
  batch: true
  branches:
    include:
    - main
  paths:
    include:
    - src
pool:
  vmImage: ubuntu-latest
stages:
- stage: Ci
  jobs:
  - job: Ci
    steps:
    - script: |
        set -eo pipefail
        dotnet build /nodeReuse:false /p:UseSharedCompilation=false 
        dotnet ./src/Automatron.Pipeline/bin/Debug/net6.0/Automatron.Pipeline.dll Build
      workingDirectory: ./src/Automatron.Pipeline
      displayName: Build
    - script: dotnet run -- Pack -s
      workingDirectory: ./src/Automatron.Pipeline
      displayName: Pack
